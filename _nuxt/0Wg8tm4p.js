import{A as o,a6 as p,r as y,T as x}from"./CKlka8Zi.js";const a=y([]);{const c=localStorage.getItem("cart");if(c)try{a.value=JSON.parse(c)}catch{}}x(a,c=>{localStorage.setItem("cart",JSON.stringify(c))},{deep:!0});const C=()=>{const c=(t,e=1)=>{const n=a.value.find(s=>s.product.id===t.id);if(n){const s=n.quantity+e;s<=t.stock?n.quantity=s:n.quantity=t.stock}else{const s=Math.min(e,t.stock);a.value.push({product:t,quantity:s})}},r=t=>{const e=a.value.findIndex(n=>n.product.id===t);e>-1&&a.value.splice(e,1)},l=(t,e)=>{const n=a.value.find(s=>s.product.id===t);n&&(e<=0?r(t):e<=n.product.stock&&(n.quantity=e))},d=()=>{a.value=[]},i=o(()=>a.value.reduce((t,e)=>t+e.product.price*e.quantity,0)),v=.08,u=o(()=>i.value*v),f=o(()=>i.value+u.value),m=o(()=>a.value.reduce((t,e)=>t+e.quantity,0));return{cart:p(a),addToCart:c,removeFromCart:r,updateQuantity:l,clearCart:d,subtotal:i,tax:u,total:f,itemCount:m}};export{C as u};
