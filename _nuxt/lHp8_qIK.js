import{d as U,u as L,m as C,M,a as $,r as b,J as N,o as A,y as E,g as f,c as _,b as h,e,i as F,w as I,f as x,_ as O,t as c,h as t,s as d,n as S,v as p,q as m,I as T,F as B,G as W,j}from"./CKlka8Zi.js";import{u as D}from"./0Wg8tm4p.js";const P={class:"checkout-page"},R={class:"checkout-header"},G={class:"container"},H={class:"container checkout-container"},J={class:"form-section"},K={class:"section-block"},Q={class:"form-group"},X=["placeholder"],Y={key:0,class:"error-msg"},Z={class:"section-block"},ee={class:"form-row"},te={class:"form-group"},se={class:"form-group"},oe={class:"form-group"},ae=["placeholder"],ce={class:"form-row three-col"},le={class:"form-group"},ie={class:"form-group"},re={class:"form-group"},ne={class:"section-block"},de={class:"payment-method-cod"},ue={class:"cod-option selected"},pe={class:"cod-info"},me={class:"title"},_e={class:"desc"},he=["disabled"],fe={class:"summary-section"},ye={class:"summary-card"},ke={class:"summary-items"},ve={class:"item-img-wrapper"},ge=["src","alt"],be={class:"item-qty-badge"},Ne={class:"item-info"},xe={class:"item-price"},Se={class:"summary-totals"},qe={class:"total-row"},Ve={class:"total-row grand-total"},we=["disabled"],ze={key:0,class:"spinner"},Ue=U({__name:"checkout",setup(Le){const{translateLanguage:s}=L(),{cart:y,total:k,clearCart:q}=D(),V=C(),w=M();$({title:`${s("checkout.title")} | Maison El Wali`,meta:[{name:"robots",content:"noindex"}]});const n=b(!1),v=b(0),o=N({email:"",firstName:"",lastName:"",address:"",city:"",country:"US",zip:""}),i=N({email:"",firstName:"",lastName:"",address:"",city:"",zip:""}),z=()=>{let r=!0;return Object.keys(i).forEach(a=>{i[a]=""}),o.email.includes("@")||(i.email=s("checkout.email_error"),r=!1),o.firstName||(i.firstName=s("checkout.required_error"),r=!1),o.lastName||(i.lastName=s("checkout.required_error"),r=!1),o.address||(i.address=s("checkout.required_error"),r=!1),o.city||(i.city=s("checkout.required_error"),r=!1),o.zip||(i.zip=s("checkout.required_error"),r=!1),r},g=async()=>{if(!z()){f.to(".checkout-form",{x:[-10,10,-10,10,0],duration:.4});return}n.value=!0,v.value=1;try{await new Promise(u=>setTimeout(u,2e3));const r=y.value.map(u=>({product_id:u.product.id,quantity:u.quantity})),a=await V.createOrder({items:r,email:o.email,firstName:o.firstName,lastName:o.lastName,address:o.address,city:o.city,country:o.country,zip:o.zip});q(),w.push({path:"/confirmation",query:{orderId:a.id}})}catch{alert(s("checkout.failed_order")),n.value=!1,v.value=0}};return A(()=>{if(y.value.length===0){E("/catalog");return}f.from(".checkout-container",{opacity:0,duration:.6}),f.from(".form-section",{y:30,opacity:0,duration:.6,delay:.2}),f.from(".summary-section",{y:30,opacity:0,duration:.6,delay:.4})}),(r,a)=>{const u=O;return h(),_("div",P,[e("div",R,[e("div",G,[F(u,{to:"/",class:"logo"},{default:I(()=>[...a[7]||(a[7]=[x("MAISON ",-1),e("span",{class:"highlight"},"EL WALI",-1)])]),_:1})])]),e("div",H,[e("div",J,[e("section",K,[e("h2",null,c(t(s)("checkout.contact_info")),1),e("div",Q,[e("label",null,c(t(s)("checkout.email_label")),1),d(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>t(o).email=l),type:"email",class:m(["input-field",{error:t(i).email}]),placeholder:t(s)("checkout.email_placeholder")},null,10,X),[[p,t(o).email]]),t(i).email?(h(),_("span",Y,c(t(i).email),1)):S("",!0)])]),e("section",Z,[e("h2",null,c(t(s)("checkout.shipping_address")),1),e("div",ee,[e("div",te,[e("label",null,c(t(s)("checkout.first_name")),1),d(e("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>t(o).firstName=l),type:"text",class:m(["input-field",{error:t(i).firstName}])},null,2),[[p,t(o).firstName]])]),e("div",se,[e("label",null,c(t(s)("checkout.last_name")),1),d(e("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>t(o).lastName=l),type:"text",class:m(["input-field",{error:t(i).lastName}])},null,2),[[p,t(o).lastName]])])]),e("div",oe,[e("label",null,c(t(s)("checkout.address")),1),d(e("input",{"onUpdate:modelValue":a[3]||(a[3]=l=>t(o).address=l),type:"text",class:m(["input-field",{error:t(i).address}]),placeholder:t(s)("checkout.address_placeholder")},null,10,ae),[[p,t(o).address]])]),e("div",ce,[e("div",le,[e("label",null,c(t(s)("checkout.city")),1),d(e("input",{"onUpdate:modelValue":a[4]||(a[4]=l=>t(o).city=l),type:"text",class:m(["input-field",{error:t(i).city}])},null,2),[[p,t(o).city]])]),e("div",ie,[e("label",null,c(t(s)("checkout.country")),1),d(e("select",{"onUpdate:modelValue":a[5]||(a[5]=l=>t(o).country=l),class:"input-field select-field"},[...a[8]||(a[8]=[e("option",{value:"MA"},"Morocco",-1),e("option",{value:"AE"},"United Arab Emirates",-1),e("option",{value:"FR"},"France",-1),e("option",{value:"US"},"United States",-1)])],512),[[T,t(o).country]])]),e("div",re,[e("label",null,c(t(s)("checkout.zip")),1),d(e("input",{"onUpdate:modelValue":a[6]||(a[6]=l=>t(o).zip=l),type:"text",class:m(["input-field",{error:t(i).zip}])},null,2),[[p,t(o).zip]])])])]),e("section",ne,[e("h2",null,c(t(s)("checkout.payment_method")),1),e("div",de,[e("div",ue,[a[9]||(a[9]=e("span",{class:"icon"},"ðŸ’µ",-1)),e("div",pe,[e("span",me,c(t(s)("checkout.cod_title")),1),e("span",_e,c(t(s)("checkout.cod_desc")),1)]),a[10]||(a[10]=e("span",{class:"check"},"âœ“",-1))])])]),e("button",{class:"btn btn-primary btn-lg place-order-btn mobile-only",disabled:t(n),onClick:g},c(t(n)?t(s)("checkout.processing"):`${t(s)("checkout.pay")} ${t(k).toLocaleString()} ${t(s)("common.currency")}`),9,he)]),e("div",fe,[e("div",ye,[e("h2",null,c(t(s)("checkout.order_summary")),1),e("div",ke,[(h(!0),_(B,null,W(t(y),l=>(h(),_("div",{key:l.product.id,class:"summary-item"},[e("div",ve,[e("img",{src:l.product.image_url,alt:l.product.name},null,8,ge),e("span",be,c(l.quantity),1)]),e("div",Ne,[e("span",null,c(l.product.name),1)]),e("span",xe,c((l.product.price*l.quantity).toLocaleString())+" "+c(t(s)("common.currency")),1)]))),128))]),e("div",Se,[e("div",qe,[e("span",null,c(t(s)("checkout.shipping")),1),e("span",null,c(t(s)("checkout.shipping")==="Shipping"?"Free":t(s)("checkout.free")),1)]),e("div",Ve,[e("span",null,c(t(s)("checkout.total")),1),e("span",null,c(t(k).toLocaleString())+" "+c(t(s)("common.currency")),1)])]),e("button",{class:"btn btn-primary btn-lg place-order-btn desktop-only",disabled:t(n),onClick:g},[t(n)?(h(),_("span",ze)):S("",!0),x(" "+c(t(n)?t(s)("checkout.processing"):`${t(s)("checkout.pay")} ${t(k).toLocaleString()} ${t(s)("common.currency")}`),1)],8,we)])])])])}}}),$e=j(Ue,[["__scopeId","data-v-3b2d75b1"]]);export{$e as default};
