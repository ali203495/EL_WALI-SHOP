import{_ as V}from"./B-8L2Q9z.js";import{_ as E}from"./CgFVh808.js";import{d as R,z as T,u as $,r as A,a as D,A as v,m as M,B as P,o as F,g as j,c as l,b as r,C as b,h as e,w as p,e as s,t,n as _,D as z,s as G,v as H,E as I,f as g,F as Q,G as U,i as k,_ as W,y as J,j as K}from"./CKlka8Zi.js";import"./Y6lJhnZ0.js";const O={class:"search-page"},X={class:"error-details"},Y={key:2,class:"container"},Z={class:"search-header"},ee={class:"eyebrow"},se=["placeholder"],te={type:"submit",class:"btn btn-primary"},ae={key:0,class:"results-info"},oe={key:1,class:"results-grid"},ne={class:"result-image"},re=["src","alt"],le={class:"result-body"},ie={key:0,class:"result-brand"},ce={class:"result-description"},de={class:"result-footer"},ue={key:0,class:"result-price"},_e={key:1,class:"result-rating"},me={key:2,class:"empty-results"},he={key:0},pe={key:1},ge=R({__name:"search",async setup(ye){let d,y;const w=T(),{translateLanguage:a}=$(),i=A(w.query.q||"");D({title:v(()=>i.value?`${a("search.title")}: ${i.value}`:a("search.title")),meta:[{name:"robots",content:"noindex, follow"}]});const x=M(),{data:m,pending:L,error:u,refresh:C}=([d,y]=P(()=>x.getProducts()),d=await d,y(),d),q=()=>{C()},h=v(()=>{if(!m.value)return[];if(!i.value)return m.value;const c=i.value.toLowerCase();return m.value.filter(o=>o.name.toLowerCase().includes(c)||o.description?.toLowerCase().includes(c)||o.brand?.name.toLowerCase().includes(c)||o.category?.name.toLowerCase().includes(c))}),S=()=>{J({path:"/search",query:{q:i.value}})};return F(()=>{j.from(".result-card",{y:30,opacity:0,stagger:.05,duration:.5})}),(c,o)=>{const B=V,N=E,f=W;return r(),l("div",O,[e(L)?(r(),b(B,{key:0,message:e(a)("catalog.loading")},null,8,["message"])):e(u)?(r(),b(N,{key:1,icon:"ðŸ”",title:e(a)("admin.failed_load"),description:e(a)("common.error_desc"),retryable:!0,onRetry:q},{footer:p(()=>[s("div",X,t(e(u).message||e(u).statusText||e(u)),1)]),_:1},8,["title","description"])):(r(),l("div",Y,[o[3]||(o[3]=s("div",{class:"blob blob-1"},null,-1)),o[4]||(o[4]=s("div",{class:"blob blob-2"},null,-1)),s("div",Z,[s("span",ee,t(e(a)("catalog.title")),1),s("h1",null,t(e(a)("search.title")),1),s("form",{class:"search-form",onSubmit:z(S,["prevent"])},[G(s("input",{"onUpdate:modelValue":o[0]||(o[0]=n=>I(i)?i.value=n:null),type:"text",placeholder:e(a)("search.placeholder"),class:"input-field search-input"},null,8,se),[[H,e(i)]]),s("button",te,t(e(a)("common.search_btn")),1)],32)]),e(i)?(r(),l("div",ae,[s("p",null,[s("strong",null,t(e(h).length),1),g(" "+t(e(a)("search.results_for"))+' "',1),s("strong",null,t(e(i)),1),o[1]||(o[1]=g('" ',-1))])])):_("",!0),e(h).length?(r(),l("div",oe,[(r(!0),l(Q,null,U(e(h),n=>(r(),l("div",{key:n.id,class:"result-card"},[k(f,{to:n?.id?`/product/${n.id}`:"#",class:"result-link"},{default:p(()=>[s("div",ne,[s("img",{src:n.image_url,alt:n.name},null,8,re)]),s("div",le,[n.brand?(r(),l("span",ie,t(n.brand.name),1)):_("",!0),s("h3",null,t(n.name),1),s("p",ce,t(n.description?.slice(0,100))+"...",1),s("div",de,[n.price?(r(),l("span",ue,t(n.price.toLocaleString())+" "+t(e(a)("common.currency")),1)):_("",!0),n.rating?(r(),l("span",_e,"â­ "+t(n.rating),1)):_("",!0)])])]),_:2},1032,["to"])]))),128))])):(r(),l("div",me,[o[2]||(o[2]=s("span",{class:"empty-icon"},"ðŸ”",-1)),s("h2",null,t(e(a)("search.no_found")),1),e(i)?(r(),l("p",he,t(e(a)("search.no_found_q")),1)):(r(),l("p",pe,t(e(a)("search.no_found_no_q")),1)),k(f,{to:"/catalog",class:"btn btn-outline"},{default:p(()=>[g(t(e(a)("search.browse")),1)]),_:1})]))]))])}}}),we=K(ge,[["__scopeId","data-v-4eaa8dde"]]);export{we as default};
