import{d as w,u as B,m as C,X as x,r as _,o as L,c as r,b as u,e as a,n as M,t as s,h as n,F as V,G as $,D as f,s as g,v as h,j as D}from"./CKlka8Zi.js";const F={class:"header"},S={class:"subtitle"},N={class:"table-container"},T={class:"data-table"},U=["src"],j={key:1},q=["title","onClick"],A={class:"modal"},E={class:"form-group"},G={class:"form-group"},I={class:"form-actions"},X=["disabled"],z=w({__name:"brands",setup(H){const{translateLanguage:e}=B(),v=C(),d=x(),b=_([]),c=_(!1),m=_(!1),i=_({name:"",logo_url:""}),p=async()=>{try{const{data:o,error:t}=await v.getBrands();if(t.value){d.error(e("admin.failed_load"));return}b.value=o.value||[]}catch{d.error(e("admin.failed_load"))}},y=async()=>{try{m.value=!0,await v.createBrand(i.value),d.success(e("admin.save_success")),c.value=!1,i.value={name:"",logo_url:""},await p()}catch(o){d.error(o.response?._data?.detail||"Failed to create brand")}finally{m.value=!1}},k=async o=>{if(confirm(e("admin.delete_confirm")))try{await v.deleteBrand(o),d.success(e("admin.delete_success")),await p()}catch(t){d.error(t.response?._data?.detail||e("admin.failed_load"))}};return L(()=>{p()}),(o,t)=>(u(),r("div",null,[a("div",F,[a("div",null,[a("h1",null,s(n(e)("admin.brands_management")),1),a("p",S,s(n(e)("nav.admin_portal"))+" / "+s(n(e)("nav.brands")),1)]),a("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=l=>c.value=!0)},"+ "+s(n(e)("admin.add_brand")),1)]),a("div",N,[a("table",T,[a("thead",null,[a("tr",null,[a("th",null,s(n(e)("admin.name")),1),a("th",null,s(n(e)("admin.brand")),1),a("th",null,s(n(e)("admin.actions")),1)])]),a("tbody",null,[(u(!0),r(V,null,$(b.value,l=>(u(),r("tr",{key:l.id},[a("td",null,s(l.name),1),a("td",null,[l.logo_url?(u(),r("img",{key:0,src:l.logo_url,class:"logo-preview"},null,8,U)):(u(),r("span",j,"-"))]),a("td",null,[a("button",{class:"btn-icon text-danger",title:n(e)("admin.delete"),onClick:J=>k(l.id)}," ðŸ—‘ï¸ ",8,q)])]))),128))])])]),c.value?(u(),r("div",{key:0,class:"modal-overlay",onClick:t[4]||(t[4]=f(l=>c.value=!1,["self"]))},[a("div",A,[a("h2",null,s(n(e)("admin.add_brand")),1),a("form",{class:"form-grid",onSubmit:f(y,["prevent"])},[a("div",E,[a("label",null,s(n(e)("admin.name")),1),g(a("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>i.value.name=l),required:"",class:"input"},null,512),[[h,i.value.name]])]),a("div",G,[a("label",null,s(n(e)("admin.logo_url")),1),g(a("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>i.value.logo_url=l),class:"input"},null,512),[[h,i.value.logo_url]])]),a("div",I,[a("button",{type:"button",class:"btn btn-outline",onClick:t[3]||(t[3]=l=>c.value=!1)},s(n(e)("admin.cancel")),1),a("button",{type:"submit",class:"btn btn-primary",disabled:m.value},s(m.value?n(e)("admin.uploading"):n(e)("admin.add_brand")),9,X)])],32)])])):M("",!0)]))}}),O=D(z,[["__scopeId","data-v-3a18248e"]]);export{O as default};
