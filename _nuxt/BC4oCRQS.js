import{d as w,u as S,m as C,X as V,r as c,o as x,c as m,b as v,e,n as L,t,h as n,F as M,G as U,D as y,s as p,v as _,j as $}from"./CKlka8Zi.js";const q={class:"header"},B={class:"subtitle"},D={class:"table-container"},F={class:"data-table"},N=["title","onClick"],T={class:"modal"},j={class:"form-group"},A={class:"form-group"},E={class:"form-group"},G={class:"form-group"},I={class:"form-actions"},X=["disabled"],z=w({__name:"stores",setup(H){const{translateLanguage:a}=S(),f=C(),i=V(),h=c([]),u=c(!1),r=c(!1),o=c({name:"",address:"",city:"",phone:"",latitude:0,longitude:0}),b=async()=>{try{const{data:d,error:s}=await f.getStores();if(s.value){i.error(a("admin.failed_load"));return}h.value=d.value||[]}catch{i.error(a("admin.failed_load"))}},g=async()=>{try{r.value=!0,await f.createStore(o.value),i.success(a("admin.save_success")),u.value=!1,o.value={name:"",address:"",city:"",phone:"",latitude:0,longitude:0},await b()}catch(d){i.error(d.response?._data?.detail||"Failed to create store")}finally{r.value=!1}},k=async d=>{if(confirm(a("admin.delete_confirm")))try{await f.deleteStore(d),i.success(a("admin.delete_success")),await b()}catch(s){i.error(s.response?._data?.detail||a("admin.failed_load"))}};return x(()=>{b()}),(d,s)=>(v(),m("div",null,[e("div",q,[e("div",null,[e("h1",null,t(n(a)("admin.stores_management")),1),e("p",B,t(n(a)("nav.admin_portal"))+" / "+t(n(a)("nav.stores")),1)]),e("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=l=>u.value=!0)},"+ "+t(n(a)("admin.add_store")),1)]),e("div",D,[e("table",F,[e("thead",null,[e("tr",null,[e("th",null,t(n(a)("admin.name")),1),e("th",null,t(n(a)("admin.address")),1),e("th",null,t(n(a)("admin.city")),1),e("th",null,t(n(a)("admin.phone")),1),e("th",null,t(n(a)("admin.actions")),1)])]),e("tbody",null,[(v(!0),m(M,null,U(h.value,l=>(v(),m("tr",{key:l.id},[e("td",null,t(l.name),1),e("td",null,t(l.address),1),e("td",null,t(l.city),1),e("td",null,t(l.phone),1),e("td",null,[e("button",{class:"btn-icon text-danger",title:n(a)("admin.delete"),onClick:J=>k(l.id)}," ðŸ—‘ï¸ ",8,N)])]))),128))])])]),u.value?(v(),m("div",{key:0,class:"modal-overlay",onClick:s[6]||(s[6]=y(l=>u.value=!1,["self"]))},[e("div",T,[e("h2",null,t(n(a)("admin.add_store")),1),e("form",{class:"form-grid",onSubmit:y(g,["prevent"])},[e("div",j,[e("label",null,t(n(a)("admin.name")),1),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>o.value.name=l),required:"",class:"input"},null,512),[[_,o.value.name]])]),e("div",A,[e("label",null,t(n(a)("admin.address")),1),p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>o.value.address=l),required:"",class:"input"},null,512),[[_,o.value.address]])]),e("div",E,[e("label",null,t(n(a)("admin.city")),1),p(e("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>o.value.city=l),required:"",class:"input"},null,512),[[_,o.value.city]])]),e("div",G,[e("label",null,t(n(a)("admin.phone")),1),p(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>o.value.phone=l),class:"input"},null,512),[[_,o.value.phone]])]),e("div",I,[e("button",{type:"button",class:"btn btn-outline",onClick:s[5]||(s[5]=l=>u.value=!1)},t(n(a)("admin.cancel")),1),e("button",{type:"submit",class:"btn btn-primary",disabled:r.value},t(r.value?n(a)("admin.uploading"):n(a)("admin.add_store")),9,X)])],32)])])):L("",!0)]))}}),O=$(z,[["__scopeId","data-v-9ca02e95"]]);export{O as default};
