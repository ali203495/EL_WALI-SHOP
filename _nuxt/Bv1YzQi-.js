import{d as h,u as C,m as k,X as w,r as u,o as x,c as m,b as v,e,n as L,t as n,h as s,F as M,G as $,D as g,s as B,v as D,j as F}from"./CKlka8Zi.js";const S={class:"header"},V={class:"subtitle"},N={class:"table-container"},T={class:"data-table"},j=["title","onClick"],q={class:"modal"},A={class:"form-group"},E={class:"form-actions"},G=["disabled"],I=h({__name:"categories",setup(U){const{translateLanguage:a}=C(),_=k(),i=w(),p=u([]),r=u(!1),d=u(!1),c=u({name:""}),f=async()=>{try{const{data:o,error:t}=await _.getCategories();if(t.value){i.error(a("admin.failed_load"));return}p.value=o.value||[]}catch(o){console.error(o),i.error(a("admin.failed_load"))}},b=async()=>{try{d.value=!0,await _.createCategory(c.value),i.success(a("admin.save_success")),r.value=!1,c.value.name="",await f()}catch(o){console.error(o),i.error(o.response?._data?.detail||"Failed to create category")}finally{d.value=!1}},y=async o=>{if(confirm(a("admin.delete_confirm")))try{await _.deleteCategory(o),i.success(a("admin.delete_success")),await f()}catch(t){console.error(t),i.error(t.response?._data?.detail||a("admin.failed_load"))}};return x(()=>{f()}),(o,t)=>(v(),m("div",null,[e("div",S,[e("div",null,[e("h1",null,n(s(a)("admin.categories_management")),1),e("p",V,n(s(a)("nav.admin_portal"))+" / "+n(s(a)("nav.categories")),1)]),e("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=l=>r.value=!0)},"+ "+n(s(a)("admin.add_category")),1)]),e("div",N,[e("table",T,[e("thead",null,[e("tr",null,[e("th",null,n(s(a)("admin.name")),1),e("th",null,n(s(a)("admin.actions")),1)])]),e("tbody",null,[(v(!0),m(M,null,$(p.value,l=>(v(),m("tr",{key:l.id},[e("td",null,n(l.name),1),e("td",null,[e("button",{class:"btn-icon text-danger",title:s(a)("admin.delete"),onClick:X=>y(l.id)}," ðŸ—‘ï¸ ",8,j)])]))),128))])])]),r.value?(v(),m("div",{key:0,class:"modal-overlay",onClick:t[3]||(t[3]=g(l=>r.value=!1,["self"]))},[e("div",q,[e("h2",null,n(s(a)("admin.add_category")),1),e("form",{class:"form-grid",onSubmit:g(b,["prevent"])},[e("div",A,[e("label",null,n(s(a)("admin.name")),1),B(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>c.value.name=l),required:"",class:"input"},null,512),[[D,c.value.name]])]),e("div",E,[e("button",{type:"button",class:"btn btn-outline",onClick:t[2]||(t[2]=l=>r.value=!1)},n(s(a)("admin.cancel")),1),e("button",{type:"submit",class:"btn btn-primary",disabled:d.value},n(d.value?s(a)("admin.uploading"):s(a)("admin.add_category")),9,G)])],32)])])):L("",!0)]))}}),H=F(I,[["__scopeId","data-v-ad23f298"]]);export{H as default};
