import{_ as ct}from"./B-8L2Q9z.js";import{_ as it}from"./CgFVh808.js";import{d as E,u as M,C as x,b as c,w as L,c as l,n as u,e,t as s,h as t,D as T,q as P,_ as K,j as Q,H as lt,r as w,m as dt,B as rt,A as j,o as ut,g as _t,l as pt,a as gt,F as B,G as O,i as H,f as U,s as G,v as mt,E as J,I as vt}from"./CKlka8Zi.js";import{u as X}from"./BZ69ob4r.js";import{u as ht}from"./0Wg8tm4p.js";import"./Y6lJhnZ0.js";const ft={key:0,class:"card-badge"},kt={class:"card-image"},yt=["src","alt"],bt={class:"card-actions"},$t=["title"],wt=["title"],Ct={class:"card-body"},xt={key:0,class:"card-brand"},qt={class:"card-title"},Lt={key:1,class:"card-rating"},Vt={class:"rating-text"},St={class:"card-footer"},Bt={class:"card-price"},Pt={class:"card-link"},Et=E({__name:"ProductCard",props:{product:{},showBadge:{type:Boolean}},emits:["quickView"],setup(o){const{isInWishlist:v,toggleWishlist:y}=X(),{translateLanguage:d}=M();return($,_)=>{const C=K;return c(),x(C,{to:o.product?.id?`/product/${o.product.id}`:"#",class:"product-card"},{default:L(()=>[o.showBadge&&o.product.rating&&o.product.rating>=4.8?(c(),l("div",ft," â­ "+s(t(d)("common.top_rated")),1)):u("",!0),e("div",kt,[e("img",{src:o.product.image_url,alt:o.product.name,loading:"lazy"},null,8,yt),e("div",bt,[e("button",{class:P(["action-btn",{active:t(v)(o.product.id)}]),onClick:_[0]||(_[0]=T(p=>t(y)(o.product.id),["prevent"])),title:t(d)("pdp.add_wishlist")}," â™¥ ",10,$t),e("button",{class:"action-btn",onClick:_[1]||(_[1]=T(p=>$.$emit("quickView",o.product),["prevent"])),title:t(d)("pdp.quick_view")}," ðŸ‘ ",8,wt)])]),e("div",Ct,[o.product.brand?(c(),l("span",xt,s(o.product.brand.name),1)):u("",!0),e("h3",qt,s(o.product.name),1),o.product.rating?(c(),l("div",Lt,[_[2]||(_[2]=e("span",{class:"stars"},"â˜…â˜…â˜…â˜…â˜…",-1)),e("span",Vt,s(o.product.rating)+" ("+s(o.product.review_count?.toLocaleString())+")",1)])):u("",!0),e("div",St,[e("span",Bt,s(o.product.price.toLocaleString())+" "+s(t(d)("common.currency")),1),e("span",Pt,s(t(d)("pdp.view"))+" â†’",1)])])]),_:1},8,["to"])}}}),Qt=Object.assign(Q(Et,[["__scopeId","data-v-d5c7d020"]]),{__name:"ProductCard"}),It={class:"empty-state"},At={class:"empty-icon"},Nt={key:0},Wt={class:"empty-actions"},jt=E({__name:"EmptyState",props:{icon:{},title:{},description:{}},setup(o){return(v,y)=>(c(),l("div",It,[e("span",At,s(o.icon||"ðŸ“­"),1),e("h3",null,s(o.title),1),o.description?(c(),l("p",Nt,s(o.description),1)):u("",!0),e("div",Wt,[lt(v.$slots,"actions",{},void 0)])]))}}),Ot=Object.assign(Q(jt,[["__scopeId","data-v-d2790c8a"]]),{__name:"EmptyState"}),Tt={class:"quick-view-modal"},Mt={class:"modal-content"},Dt={class:"product-image"},Ft=["src","alt"],Rt={class:"product-details"},zt={class:"text-2xl font-bold mb-2"},Ht={class:"text-primary text-xl font-bold mb-4"},Ut={class:"text-gray-600 mb-6"},Gt={key:0,class:"qty-selector-quick"},Jt={class:"qty-controls"},Kt=["disabled"],Xt={class:"qty-value"},Yt=["disabled"],Zt={class:"actions"},te=["disabled"],ee=E({__name:"ProductQuickView",props:{product:{},isOpen:{type:Boolean}},emits:["close"],setup(o,{emit:v}){const y=o,d=v,{addToCart:$}=ht(),{isInWishlist:_,toggleWishlist:C}=X(),{translateLanguage:p}=M(),h=w(1),V=()=>{y.product&&h.value<(y.product.stock||0)&&h.value++},I=()=>{h.value>1&&h.value--},S=()=>{$(y.product,h.value),d("close")};return(D,g)=>o.isOpen?(c(),l("div",{key:0,class:"quick-view-overlay",onClick:g[2]||(g[2]=T(b=>d("close"),["self"]))},[e("div",Tt,[e("button",{class:"close-btn",onClick:g[0]||(g[0]=b=>d("close"))},"Ã—"),e("div",Mt,[e("div",Dt,[e("img",{src:o.product.image_url,alt:o.product.name},null,8,Ft)]),e("div",Rt,[e("h2",zt,s(o.product.name),1),e("p",Ht,s(o.product.price.toLocaleString())+" "+s(t(p)("common.currency")),1),e("p",Ut,s(o.product.description||t(p)("pdp.no_description")),1),o.product.stock>0?(c(),l("div",Gt,[e("label",null,s(t(p)("pdp.quantity")),1),e("div",Jt,[e("button",{class:"qty-btn",onClick:I,disabled:t(h)<=1},"âˆ’",8,Kt),e("span",Xt,s(t(h)),1),e("button",{class:"qty-btn",onClick:V,disabled:t(h)>=o.product.stock},"+",8,Yt)])])):u("",!0),e("div",Zt,[e("button",{class:"btn btn-primary flex-1",disabled:o.product.stock<=0,onClick:S},s(o.product.stock>0?t(p)("pdp.add_to_cart"):t(p)("pdp.out_stock")),9,te),e("button",{class:P(["btn btn-outline w-12 flex justify-center items-center wishlist-btn",{"in-wishlist":t(_)(o.product.id)}]),onClick:g[1]||(g[1]=b=>t(C)(o.product.id))}," â™¥ ",2)])])])])])):u("",!0)}}),se=Object.assign(Q(ee,[["__scopeId","data-v-1d825b54"]]),{__name:"ProductQuickView"}),oe={class:"catalog-page"},ae={class:"error-details"},ne={class:"filter-sidebar"},ce={class:"filter-header"},ie={class:"filter-section"},le={class:"filter-list"},de=["onClick"],re={class:"filter-section"},ue={class:"filter-list"},_e=["onClick"],pe={key:0,class:"filter-section admin-section"},ge={class:"filter-list"},me={class:"catalog-content"},ve={class:"catalog-header"},he={class:"header-left"},fe={class:"product-count"},ke={class:"header-controls"},ye=["placeholder"],be={value:"featured"},$e={value:"price-low"},we={value:"price-high"},Ce={value:"rating"},xe={key:0,class:"active-filters"},qe={class:"product-grid"},Le=E({__name:"catalog",async setup(o){let v,y;const d=dt(),$=([v,y]=rt(()=>Promise.all([d.getProducts(),d.getCategories(),d.getBrands()])),v=await v,y(),v),{data:_,pending:C,error:p,refresh:h}=$[0],{data:V,error:I}=$[1],{data:S,error:D}=$[2],g=j(()=>p.value||I.value||D.value),b=w(""),f=w(null),k=w(null),q=w("featured"),A=j(()=>{if(!_.value)return[];let r=[..._.value];if(b.value){const n=b.value.toLowerCase();r=r.filter(m=>m.name.toLowerCase().includes(n)||m.description?.toLowerCase().includes(n)||m.brand?.name?.toLowerCase().includes(n))}switch(f.value&&(r=r.filter(n=>n.category_id===f.value)),k.value&&(r=r.filter(n=>n.brand_id===k.value)),q.value){case"price-low":r.sort((n,m)=>n.price-m.price);break;case"price-high":r.sort((n,m)=>m.price-n.price);break;case"rating":r.sort((n,m)=>(m.rating||0)-(n.rating||0));break}return r}),F=()=>{b.value="",f.value=null,k.value=null,q.value="featured"},Y=()=>{h()};ut(()=>{p.value,!C.value&&!p.value&&_t.from(".product-card",{y:30,opacity:0,stagger:.05,duration:.5,ease:"power2.out"})});const R=pt(),Z=j(()=>R.user?.is_admin||R.user?.is_super_admin),{translateLanguage:i}=M();gt({title:i("catalog.title")});const N=w(!1),W=w(null),tt=r=>{W.value=r,N.value=!0};return(r,n)=>{const m=ct,et=it,z=K,st=Qt,ot=Ot,at=se;return c(),l("div",oe,[t(C)?(c(),x(m,{key:0,message:t(i)("catalog.loading")},null,8,["message"])):t(g)?(c(),x(et,{key:1,icon:"âŒ",title:t(i)("catalog.failed"),description:t(i)("catalog.error_desc"),retryable:!0,onRetry:Y},{footer:L(()=>[e("div",ae,s(t(g).message||t(g).statusText||t(g)),1)]),_:1},8,["title","description"])):(c(),l(B,{key:2},[e("aside",ne,[e("div",ce,[e("h3",null,s(t(i)("catalog.filters")),1),e("button",{class:"clear-btn",onClick:F},s(t(i)("catalog.clear_all")),1)]),e("div",ie,[e("h4",null,s(t(i)("catalog.categories")),1),e("ul",le,[(c(!0),l(B,null,O(t(V),a=>(c(),l("li",{key:a.id,class:P({active:t(f)===a.id}),onClick:nt=>f.value=t(f)===a.id?null:a.id},s(a.name),11,de))),128))])]),e("div",re,[e("h4",null,s(t(i)("catalog.brands")),1),e("ul",ue,[(c(!0),l(B,null,O(t(S),a=>(c(),l("li",{key:a.id,class:P({active:t(k)===a.id}),onClick:nt=>k.value=t(k)===a.id?null:a.id},s(a.name),11,_e))),128))])]),t(Z)?(c(),l("div",pe,[e("h4",null,"ðŸ’Ž "+s(t(i)("catalog.quick_actions")),1),e("ul",ge,[e("li",null,[H(z,{to:"/admin/categories"},{default:L(()=>[U("ðŸ“‚ "+s(t(i)("catalog.edit_categories")),1)]),_:1})]),e("li",null,[H(z,{to:"/admin/brands"},{default:L(()=>[U("ðŸ·ï¸ "+s(t(i)("catalog.edit_brands")),1)]),_:1})])])])):u("",!0)]),e("main",me,[e("header",ve,[e("div",he,[e("h1",null,s(t(i)("catalog.title")),1),e("span",fe,s(t(A).length)+" "+s(t(i)("catalog.count_plural")),1)]),e("div",ke,[G(e("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>J(b)?b.value=a:null),type:"text",placeholder:t(i)("catalog.search_placeholder"),class:"input-field search-input"},null,8,ye),[[mt,t(b)]]),G(e("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>J(q)?q.value=a:null),class:"input-field sort-select"},[e("option",be,s(t(i)("catalog.sort_featured")),1),e("option",$e,s(t(i)("catalog.sort_price_low")),1),e("option",we,s(t(i)("catalog.sort_price_high")),1),e("option",Ce,s(t(i)("catalog.sort_rating")),1)],512),[[vt,t(q)]])])]),t(f)||t(k)?(c(),l("div",xe,[t(f)?(c(),l("span",{key:0,class:"filter-tag",onClick:n[2]||(n[2]=a=>f.value=null)},s(t(V)?.find(a=>a.id===t(f))?.name)+" Ã— ",1)):u("",!0),t(k)?(c(),l("span",{key:1,class:"filter-tag",onClick:n[3]||(n[3]=a=>k.value=null)},s(t(S)?.find(a=>a.id===t(k))?.name)+" Ã— ",1)):u("",!0)])):u("",!0),e("div",qe,[(c(!0),l(B,null,O(t(A),a=>(c(),x(st,{key:a.id,product:a,"show-badge":!!a.rating,onQuickView:tt},null,8,["product","show-badge"]))),128))]),t(A).length===0?(c(),x(ot,{key:1,icon:"ðŸ”",title:t(i)("catalog.no_found"),description:t(i)("catalog.no_found_desc")},{actions:L(()=>[e("button",{class:"btn btn-outline",onClick:F},s(t(i)("catalog.clear_all")),1)]),_:1},8,["title","description"])):u("",!0)])],64)),t(W)?(c(),x(at,{key:3,"is-open":t(N),product:t(W),onClose:n[4]||(n[4]=a=>N.value=!1)},null,8,["is-open","product"])):u("",!0)])}}}),Ie=Q(Le,[["__scopeId","data-v-5e16dade"]]);export{Ie as default};
