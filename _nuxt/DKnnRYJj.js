import{d as P,a as V,X as C,z as N,r as l,o as q,g as b,c as p,b as c,e as s,n as w,i as B,f as m,D as y,s as v,v as f,t as g,w as R,_ as T,a3 as _,y as U,j as D}from"./CKlka8Zi.js";const E={class:"page-container"},L={class:"card"},$={key:0},F={class:"form-group"},M=["disabled"],A={key:1,class:"step-2"},O={class:"form-group"},j={class:"form-group"},z=["disabled"],H=P({__name:"forgot-password",setup(I){V({title:"Forgot Password",meta:[{name:"robots",content:"noindex, nofollow"}]});const n=C(),x=N(),i=l(1),r=l(""),d=l(""),u=l(""),o=l(!1),S=async()=>{o.value=!0;try{const t=_();await $fetch(`${t.public.apiBase}/auth/forgot-password`,{method:"POST",body:{email:r.value}}),n.success("Verification code sent if email exists"),i.value=2,b.from(".step-2",{x:20,opacity:0,duration:.4})}catch{n.error("Failed to process request")}finally{o.value=!1}},h=async()=>{o.value=!0;try{const t=_();await $fetch(`${t.public.apiBase}/auth/reset-password`,{method:"POST",body:{email:x.query.email,code:d.value,new_password:u.value}}),n.success("Password updated successfully"),U("/login")}catch(t){n.error(t.response?._data?.detail||"Failed to reset password")}finally{o.value=!1}};return q(()=>{b.from(".card",{y:30,opacity:0,duration:.6,ease:"power2.out"})}),(t,e)=>{const k=T;return c(),p("div",E,[e[11]||(e[11]=s("div",{class:"background"},[s("div",{class:"gradient-orb orb-1"})],-1)),s("div",L,[e[10]||(e[10]=s("h2",null,"Reset Password",-1)),i.value===1?(c(),p("div",$,[e[4]||(e[4]=s("p",{class:"subtitle"},"Enter your email to receive a recovery code.",-1)),e[5]||(e[5]=s("div",{class:"alert-info"},[s("span",{class:"icon"},"ℹ️"),s("p",null,[s("strong",null,"Admin Note:"),m(" Since email is not configured, please check the "),s("strong",null,"Server Logs"),m(" (Render Dashboard) to find your verification code.")])],-1)),s("form",{onSubmit:y(S,["prevent"])},[s("div",F,[e[3]||(e[3]=s("label",null,"Email Address",-1)),v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a),type:"email",required:"",class:"input",placeholder:"admin@example.com"},null,512),[[f,r.value]])]),s("button",{type:"submit",class:"btn btn-primary full-width",disabled:o.value},g(o.value?"Sending...":"Send Code"),9,M)],32)])):w("",!0),i.value===2?(c(),p("div",A,[e[8]||(e[8]=s("p",{class:"subtitle"},"Enter the code sent to your email and your new password.",-1)),s("form",{onSubmit:y(h,["prevent"])},[s("div",O,[e[6]||(e[6]=s("label",null,"Verification Code",-1)),v(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a),required:"",class:"input",placeholder:"123456"},null,512),[[f,d.value]])]),s("div",j,[e[7]||(e[7]=s("label",null,"New Password",-1)),v(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),type:"password",required:"",class:"input",placeholder:"New password"},null,512),[[f,u.value]])]),s("button",{type:"submit",class:"btn btn-primary full-width",disabled:o.value},g(o.value?"Updating...":"Update Password"),9,z)],32)])):w("",!0),B(k,{to:"/login",class:"back-link"},{default:R(()=>[...e[9]||(e[9]=[m("Back to Login",-1)])]),_:1})])])}}}),X=D(H,[["__scopeId","data-v-9240eba2"]]);export{X as default};
