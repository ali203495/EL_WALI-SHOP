import{d as V,s as C,j as x,U as h,r as v,o as q,c as d,e,k as c,z as A,F,B as M,y,l as u,v as o,h as S,V as B,t as a,a as m,C as g,i as $}from"./mt9UUtP3.js";const N={dir:"rtl"},T={class:"header"},z={class:"table-container"},D={class:"data-table"},L=["onClick"],j={class:"modal"},E={class:"form-group"},I={class:"form-group"},G={class:"form-group"},H={class:"form-group"},J={class:"form-group"},K={class:"form-group"},O={class:"form-group checkbox-group"},P={class:"form-actions"},Q=["disabled"],R=V({__name:"users",setup(W){const b=C(),k=x(),i=h(),_=v([]),r=v(!1),p=v(!1),t=v({username:"",first_name:"",last_name:"",email:"",phone_number:"",password:"",is_admin:!0,is_super_admin:!1}),f=async()=>{try{const{data:n}=await b.getUsers();_.value=n.value||[]}catch{i.error("Failed to fetch users")}},w=async()=>{try{p.value=!0,await b.createUser(t.value),i.success("Admin added successfully"),r.value=!1,t.value={username:"",first_name:"",last_name:"",email:"",phone_number:"",password:"",is_admin:!0,is_super_admin:!1},await f()}catch(n){i.error(n.response?._data?.detail||"Failed to create admin")}finally{p.value=!1}},U=async n=>{if(confirm("Are you sure you want to delete this user?"))try{await b.deleteUser(n),i.success("User deleted"),await f()}catch(s){i.error(s.response?._data?.detail||"Failed to delete user")}};return q(()=>{f()}),(n,s)=>(m(),d("div",N,[e("div",null,[e("div",T,[s[10]||(s[10]=e("h1",null,"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†",-1)),A(k).user?.is_super_admin?(m(),d("button",{key:0,onClick:s[0]||(s[0]=l=>r.value=!0),class:"btn btn-primary"},"+ Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø¤ÙˆÙ„")):c("",!0)]),e("div",z,[e("table",D,[s[11]||(s[11]=e("thead",null,[e("tr",null,[e("th",null,"Ø§Ù„Ø§Ø³Ù…"),e("th",null,"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"),e("th",null,"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"),e("th",null,"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"),e("th",null,"Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©"),e("th",null,"Ø§Ù„Ø­Ø§Ù„Ø©"),e("th",null,"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª")])],-1)),e("tbody",null,[(m(!0),d(F,null,M(_.value,l=>(m(),d("tr",{key:l.id},[e("td",null,a(l.first_name)+" "+a(l.last_name),1),e("td",null,a(l.username),1),e("td",null,a(l.email),1),e("td",null,a(l.phone_number),1),e("td",null,[e("span",{class:g(["badge",l.is_super_admin?"badge-purple":"badge-blue"])},a(l.is_super_admin?"Ù…Ø³Ø¤ÙˆÙ„ Ù…Ù…ØªØ§Ø²":"Ù…Ø³Ø¤ÙˆÙ„"),3)]),e("td",null,[e("span",{class:g(["badge",l.is_active?"badge-success":"badge-danger"])},a(l.is_active?"Ù†Ø´Ø·":"ØºÙŠØ± Ù†Ø´Ø·"),3)]),e("td",null,[e("button",{onClick:X=>U(l.id),class:"btn-icon text-danger",title:"Ø­Ø°Ù"}," ğŸ—‘ï¸ ",8,L)])]))),128))])])]),r.value?(m(),d("div",{key:0,class:"modal-overlay",onClick:s[9]||(s[9]=y(l=>r.value=!1,["self"]))},[e("div",j,[s[19]||(s[19]=e("h2",null,"Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø¤ÙˆÙ„ Ø¬Ø¯ÙŠØ¯",-1)),e("form",{onSubmit:y(w,["prevent"]),class:"form-grid"},[e("div",E,[s[12]||(s[12]=e("label",null,"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",-1)),u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>t.value.username=l),required:"",class:"input"},null,512),[[o,t.value.username]])]),e("div",I,[s[13]||(s[13]=e("label",null,"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",-1)),u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>t.value.password=l),type:"password",required:"",class:"input"},null,512),[[o,t.value.password]])]),e("div",G,[s[14]||(s[14]=e("label",null,"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„",-1)),u(e("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>t.value.first_name=l),required:"",class:"input"},null,512),[[o,t.value.first_name]])]),e("div",H,[s[15]||(s[15]=e("label",null,"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©",-1)),u(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>t.value.last_name=l),required:"",class:"input"},null,512),[[o,t.value.last_name]])]),e("div",J,[s[16]||(s[16]=e("label",null,"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",-1)),u(e("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>t.value.email=l),type:"email",required:"",class:"input"},null,512),[[o,t.value.email]])]),e("div",K,[s[17]||(s[17]=e("label",null,"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",-1)),u(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>t.value.phone_number=l),required:"",class:"input"},null,512),[[o,t.value.phone_number]])]),e("div",O,[e("label",null,[u(e("input",{type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=l=>t.value.is_super_admin=l)},null,512),[[B,t.value.is_super_admin]]),s[18]||(s[18]=S(" ØªØ¹ÙŠÙŠÙ† ÙƒÙ…Ø³Ø¤ÙˆÙ„ Ù…Ù…ØªØ§Ø² (Super Admin) ",-1))])]),e("div",P,[e("button",{type:"button",onClick:s[8]||(s[8]=l=>r.value=!1),class:"btn btn-outline"},"Ø¥Ù„ØºØ§Ø¡"),e("button",{type:"submit",class:"btn btn-primary",disabled:p.value},a(p.value?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ©...":"Ø¥Ø¶Ø§ÙØ©"),9,Q)])],32)])])):c("",!0)])]))}}),Z=$(R,[["__scopeId","data-v-858b485c"]]);export{Z as default};
