import{d as N,s as O,r as m,x as A,q as v,c as n,e as t,f as P,w as V,F as g,B as b,z as E,k as y,t as l,g as d,_ as I,a as i,h as L,C as z,y as $,I as D,i as M}from"./mt9UUtP3.js";const Q={class:"pos-container"},W={class:"products-area"},j={class:"pos-header"},G={class:"products-grid"},H=["id","onClick"],J=["src","alt"],K={class:"product-details"},R={key:0,class:"product-brand"},U={class:"product-meta"},X={class:"product-price"},Y={class:"cart-panel"},Z={class:"cart-header"},tt={class:"cart-items"},st={key:0,class:"empty-cart"},et=["id"],at=["src"],ot={class:"cart-item-info"},nt={class:"cart-item-name"},it={class:"cart-item-price"},ct={class:"quantity-controls"},lt=["onClick"],dt=["id"],rt=["onClick"],ut={class:"cart-summary"},_t={class:"summary-row"},pt={class:"summary-row"},mt={class:"summary-row total"},vt=["disabled"],yt={key:0},ht={key:1},ft={key:2},kt=N({__name:"index",async setup(Ct){let r,h;const f=O(),o=m([]),u=m(!1),_=m(!1),{data:q}=([r,h]=A(()=>f.getProducts()),r=await r,h(),r),w=a=>{const s=o.value.find(e=>e.product.id===a.id);s?(s.quantity++,d.fromTo(`#qty-${a.id}`,{scale:1.3,color:"#4f46e5"},{scale:1,color:"#0f172a",duration:.3})):(o.value.push({product:a,quantity:1}),D(()=>{d.from(`#cart-item-${a.id}`,{x:-30,opacity:0,duration:.4,ease:"back.out(1.7)"})}));const c=document.getElementById(`product-${a.id}`);c&&d.to(c,{scale:.95,duration:.1,yoyo:!0,repeat:1,ease:"power2.inOut"})},F=a=>{const s=o.value.findIndex(c=>c.product.id===a);s>-1&&d.to(`#cart-item-${a}`,{x:50,opacity:0,duration:.3,onComplete:()=>{o.value.splice(s,1)}})},k=(a,s)=>{const c=o.value.find(e=>e.product.id===a);c&&(c.quantity+=s,c.quantity<=0&&F(a))},p=v(()=>o.value.reduce((a,s)=>a+s.product.price*s.quantity,0)),C=v(()=>p.value*.08),T=v(()=>p.value+C.value),B=async()=>{if(o.value.length===0)return;u.value=!0;const a=o.value.map(s=>({product_id:s.product.id,quantity:s.quantity}));try{await f.createOrder({items:a}),_.value=!0,o.value=[],setTimeout(()=>{_.value=!1},3e3)}catch{alert("Error placing order")}finally{u.value=!1}},S=()=>{d.to(".cart-item",{x:50,opacity:0,stagger:.05,duration:.2,onComplete:()=>{o.value=[]}})};return(a,s)=>{const c=I;return i(),n("div",Q,[t("div",W,[t("div",j,[s[1]||(s[1]=t("h1",null,"Point of Sale",-1)),P(c,{to:"/admin",class:"btn btn-outline btn-sm"},{default:V(()=>[...s[0]||(s[0]=[L("â† Back to Admin",-1)])]),_:1})]),t("div",G,[(i(!0),n(g,null,b(E(q),e=>(i(),n("div",{key:e.id,id:`product-${e.id}`,class:"product-tile",onClick:x=>w(e)},[t("img",{src:e.image_url,alt:e.name,class:"product-image"},null,8,J),t("div",K,[e.brand?(i(),n("span",R,l(e.brand.name),1)):y("",!0),t("h3",null,l(e.name),1),t("div",U,[t("span",X,"$"+l(e.price),1),t("span",{class:z(["product-stock",{low:e.stock<20}])},l(e.stock)+" left ",3)])])],8,H))),128))])]),t("div",Y,[t("div",Z,[s[2]||(s[2]=t("h2",null,"Current Order",-1)),o.value.length>0?(i(),n("button",{key:0,onClick:S,class:"clear-btn"},"Clear All")):y("",!0)]),t("div",tt,[o.value.length===0?(i(),n("div",st,[...s[3]||(s[3]=[t("span",{class:"empty-icon"},"ðŸ›’",-1),t("p",null,"Cart is empty",-1),t("p",{class:"hint"},"Click products to add them",-1)])])):y("",!0),(i(!0),n(g,null,b(o.value,e=>(i(),n("div",{key:e.product.id,id:`cart-item-${e.product.id}`,class:"cart-item"},[t("img",{src:e.product.image_url,class:"cart-thumb"},null,8,at),t("div",ot,[t("span",nt,l(e.product.name),1),t("span",it,"$"+l((e.product.price*e.quantity).toFixed(2)),1)]),t("div",ct,[t("button",{onClick:$(x=>k(e.product.id,-1),["stop"])},"âˆ’",8,lt),t("span",{id:`qty-${e.product.id}`},l(e.quantity),9,dt),t("button",{onClick:$(x=>k(e.product.id,1),["stop"])},"+",8,rt)])],8,et))),128))]),t("div",ut,[t("div",_t,[s[4]||(s[4]=t("span",null,"Subtotal",-1)),t("span",null,"$"+l(p.value.toFixed(2)),1)]),t("div",pt,[s[5]||(s[5]=t("span",null,"Tax (8%)",-1)),t("span",null,"$"+l(C.value.toFixed(2)),1)]),t("div",mt,[s[6]||(s[6]=t("span",null,"Total",-1)),t("span",null,"$"+l(T.value.toFixed(2)),1)]),t("button",{class:"checkout-btn",disabled:o.value.length===0||u.value,onClick:B},[u.value?(i(),n("span",yt,"Processing...")):_.value?(i(),n("span",ht,"âœ“ Order Placed!")):(i(),n("span",ft,"Complete Order"))],8,vt)])])])}}}),gt=M(kt,[["__scopeId","data-v-22f0a3fe"]]);export{gt as default};
