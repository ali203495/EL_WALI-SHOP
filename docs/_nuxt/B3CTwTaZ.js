import{s as h,K as f,L as c}from"./mt9UUtP3.js";const m=()=>{const l=h(),{$toast:a}=f(),i=c("wishlist_items",()=>[]),t=c("wishlist_loading",()=>!1),u=async()=>{t.value=!0;try{const{data:s}=await l.getWishlist();i.value=s.value||[]}catch(s){console.error("Failed to fetch wishlist",s)}finally{t.value=!1}},r=async s=>{if(!o(s)){t.value=!0;try{const e=await l.addToWishlistApi(s);i.value.push(e),a.success("Added to wishlist")}catch(e){a.error(e.response?._data?.detail||"Failed to add to wishlist"),console.error(e)}finally{t.value=!1}}},n=async s=>{t.value=!0;try{await l.removeFromWishlistApi(s),i.value=i.value.filter(e=>e.product.id!==s),a.info("Removed from wishlist")}catch(e){a.error("Failed to remove from wishlist"),console.error(e)}finally{t.value=!1}},o=s=>i.value.some(e=>e.product.id===s);return{items:i,isLoading:t,fetchWishlist:u,addToWishlist:r,removeFromWishlist:n,isInWishlist:o,toggleWishlist:s=>{o(s)?n(s):r(s)}}};export{m as u};
