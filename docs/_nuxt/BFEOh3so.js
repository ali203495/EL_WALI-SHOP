import{q as s,a2 as m,r as y,Q as x}from"./mt9UUtP3.js";const a=y([]);{const o=localStorage.getItem("cart");if(o)try{a.value=JSON.parse(o)}catch(c){console.error("Failed to parse cart",c)}}x(a,o=>{localStorage.setItem("cart",JSON.stringify(o))},{deep:!0});const q=()=>{const o=e=>{const t=a.value.find(r=>r.product.id===e.id);t?t.quantity<e.stock&&t.quantity++:a.value.push({product:e,quantity:1})},c=e=>{const t=a.value.findIndex(r=>r.product.id===e);t>-1&&a.value.splice(t,1)},i=(e,t)=>{const r=a.value.find(p=>p.product.id===e);r&&(t<=0?c(e):t<=r.product.stock&&(r.quantity=t))},l=()=>{a.value=[]},n=s(()=>a.value.reduce((e,t)=>e+t.product.price*t.quantity,0)),d=.08,u=s(()=>n.value*d),v=s(()=>n.value+u.value),f=s(()=>a.value.reduce((e,t)=>e+t.quantity,0));return{cart:m(a),addToCart:o,removeFromCart:c,updateQuantity:i,clearCart:l,subtotal:n,tax:u,total:v,itemCount:f}};export{q as u};
