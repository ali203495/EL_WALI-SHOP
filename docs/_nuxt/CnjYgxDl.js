import{d as D,H as X,q as N,s as O,r as b,c,a as u,e,l as $,v as w,z as s,G as L,F as T,B,t as r,C as P,k as x,y as F,i as M,Q as ee,D as Q,E as j,Y as R,g as G,f as V,w as E,Z as te,U as le,x as oe,o as se}from"./mt9UUtP3.js";const ne={class:"form-grid"},ae={class:"form-group full-width"},ie={class:"form-group full-width"},de={class:"form-group"},ue={class:"form-group"},re={class:"form-group"},ce=["value"],me={class:"form-group"},pe=["value"],ve={class:"form-group full-width"},fe={class:"image-input-type"},ge={key:0,class:"mt-2"},_e={key:1,class:"mt-2 upload-container"},be={key:0,class:"upload-status"},ye={key:1,class:"preview"},ke=["src"],$e={class:"form-actions"},Ce={type:"submit",class:"btn btn-primary"},he=D({__name:"ProductForm",props:{product:{},categories:{},brands:{}},emits:["submit","cancel"],setup(i,{emit:g}){const d=i,m=g,o=X({id:d.product?.id,name:d.product?.name||"",description:d.product?.description||"",price:d.product?.price||0,stock:d.product?.stock||0,image_url:d.product?.image_url||"",category_id:d.product?.category_id||null,brand_id:d.product?.brand_id||null}),y=N(()=>!!d.product?.id),v=O(),f=b("url"),C=b(!1),U=b(null),S=()=>{m("submit",{...o})},h=async k=>{const t=k.target;if(t.files&&t.files[0]){C.value=!0;try{const l=await v.uploadImage(t.files[0]);o.image_url=l}catch{alert("Fialed to upload image")}finally{C.value=!1}}};return(k,t)=>(u(),c("form",{onSubmit:F(S,["prevent"]),class:"product-form",dir:"rtl"},[e("div",ne,[e("div",ae,[t[10]||(t[10]=e("label",null,"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ *",-1)),$(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>s(o).name=l),type:"text",required:"",class:"input-field"},null,512),[[w,s(o).name]])]),e("div",ie,[t[11]||(t[11]=e("label",null,"Ø§Ù„ÙˆØµÙ",-1)),$(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>s(o).description=l),rows:"3",class:"input-field"},null,512),[[w,s(o).description]])]),e("div",de,[t[12]||(t[12]=e("label",null,"Ø§Ù„Ø³Ø¹Ø± *",-1)),$(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s(o).price=l),type:"number",min:"0",step:"0.01",required:"",class:"input-field"},null,512),[[w,s(o).price]])]),e("div",ue,[t[13]||(t[13]=e("label",null,"Ø§Ù„Ù…Ø®Ø²ÙˆÙ† *",-1)),$(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s(o).stock=l),type:"number",min:"0",required:"",class:"input-field"},null,512),[[w,s(o).stock]])]),e("div",re,[t[15]||(t[15]=e("label",null,"Ø§Ù„ÙØ¦Ø©",-1)),$(e("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>s(o).category_id=l),class:"input-field"},[t[14]||(t[14]=e("option",{value:null},"Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©",-1)),(u(!0),c(T,null,B(i.categories,l=>(u(),c("option",{key:l.id,value:l.id},r(l.name),9,ce))),128))],512),[[L,s(o).category_id]])]),e("div",me,[t[17]||(t[17]=e("label",null,"Ø§Ù„Ù…Ø§Ø±ÙƒØ©",-1)),$(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>s(o).brand_id=l),class:"input-field"},[t[16]||(t[16]=e("option",{value:null},"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø±ÙƒØ©",-1)),(u(!0),c(T,null,B(i.brands,l=>(u(),c("option",{key:l.id,value:l.id},r(l.name),9,pe))),128))],512),[[L,s(o).brand_id]])]),e("div",ve,[t[18]||(t[18]=e("label",null,"ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬",-1)),e("div",fe,[e("button",{type:"button",class:P(["type-btn",{active:s(f)==="url"}]),onClick:t[6]||(t[6]=l=>f.value="url")}," Ø±Ø§Ø¨Ø· Ø®Ø§Ø±Ø¬ÙŠ ",2),e("button",{type:"button",class:P(["type-btn",{active:s(f)==="upload"}]),onClick:t[7]||(t[7]=l=>f.value="upload")}," Ø±ÙØ¹ ØµÙˆØ±Ø© ",2)]),s(f)==="url"?(u(),c("div",ge,[$(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>s(o).image_url=l),type:"url",placeholder:"https://...",class:"input-field",style:{direction:"ltr","text-align":"left"}},null,512),[[w,s(o).image_url]])])):(u(),c("div",_e,[e("input",{type:"file",ref_key:"fileInput",ref:U,onChange:h,accept:"image/*",class:"file-input"},null,544),s(C)?(u(),c("div",be,"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...")):x("",!0),s(o).image_url&&s(f)==="upload"?(u(),c("div",ye,[e("img",{src:s(o).image_url,alt:"Preview"},null,8,ke)])):x("",!0)]))])]),e("div",$e,[e("button",{type:"button",class:"btn btn-outline",onClick:t[9]||(t[9]=l=>m("cancel"))},"Ø¥Ù„ØºØ§Ø¡"),e("button",Ce,r(s(y)?"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬"),1)])],32))}}),we=Object.assign(M(he,[["__scopeId","data-v-24072f64"]]),{__name:"ProductForm"}),Ve={key:0,class:"modal-header"},xe={class:"modal-body"},Pe={key:1,class:"modal-footer"},Ue=D({__name:"Modal",props:{modelValue:{type:Boolean},title:{},size:{}},emits:["update:modelValue","close"],setup(i,{emit:g}){const d=i,m=g,o=b(null),y=()=>{m("update:modelValue",!1),m("close")};return ee(()=>d.modelValue,v=>{v&&o.value&&G.from(o.value.querySelector(".modal-content"),{scale:.9,opacity:0,duration:.2,ease:"power2.out"})}),(v,f)=>(u(),Q(R,{to:"body"},[i.modelValue?(u(),c("div",{key:0,ref_key:"modalRef",ref:o,class:"modal-overlay",onClick:F(y,["self"])},[e("div",{class:P(["modal-content",[`modal-${i.size||"md"}`]])},[i.title?(u(),c("div",Ve,[e("h3",null,r(i.title),1),e("button",{class:"close-btn",onClick:y},"Ã—")])):x("",!0),e("div",xe,[j(v.$slots,"default",{},void 0)]),v.$slots.footer?(u(),c("div",Pe,[j(v.$slots,"footer",{},void 0)])):x("",!0)],2)],512)):x("",!0)]))}}),Se=Object.assign(M(Ue,[["__scopeId","data-v-0086c375"]]),{__name:"Modal"}),De={class:"confirm-dialog"},Me={class:"confirm-actions"},Te=D({__name:"ConfirmDialog",props:{modelValue:{type:Boolean},title:{},message:{},confirmText:{},cancelText:{},danger:{type:Boolean}},emits:["update:modelValue","confirm","cancel"],setup(i,{emit:g}){const d=g,m=()=>{d("update:modelValue",!1),d("cancel")},o=()=>{d("update:modelValue",!1),d("confirm")};return(y,v)=>(u(),Q(R,{to:"body"},[V(te,{name:"fade"},{default:E(()=>[i.modelValue?(u(),c("div",{key:0,class:"confirm-overlay",onClick:F(m,["self"])},[e("div",De,[e("div",{class:P(["confirm-icon",{danger:i.danger}])},r(i.danger?"âš ï¸":"â“"),3),e("h3",null,r(i.title||"Are you sure?"),1),e("p",null,r(i.message||"This action cannot be undone."),1),e("div",Me,[e("button",{class:"btn btn-outline",onClick:m},r(i.cancelText||"Cancel"),1),e("button",{class:P(["btn",i.danger?"btn-danger":"btn-primary"]),onClick:o},r(i.confirmText||"Confirm"),3)])])])):x("",!0)]),_:1})]))}}),Be=Object.assign(M(Te,[["__scopeId","data-v-c41939ae"]]),{__name:"ConfirmDialog"}),Ee={dir:"rtl"},Fe={class:"content"},Ie={class:"toolbar"},qe={class:"count"},ze={class:"table-container"},Ae={class:"data-table"},Le={class:"product-cell"},je=["src","alt"],Ne={class:"product-name"},Oe={class:"product-id"},Qe={class:"price"},Re={class:"rating"},Ge={class:"actions"},He=["onClick"],We=["onClick"],Ye=D({__name:"products",async setup(i){let g,d;const m=O(),{success:o,error:y}=le(),v=b(!1),[{data:f,refresh:C},{data:U},{data:S}]=([g,d]=oe(()=>Promise.all([m.getProducts(),m.getCategories(),m.getBrands()])),g=await g,d(),g),h=b(""),k=b(!1),t=b(!1),l=b(!1),_=b(null),I=N(()=>{if(!f.value)return[];if(!h.value)return f.value;const p=h.value.toLowerCase();return f.value.filter(n=>n.name.toLowerCase().includes(p)||n.brand?.name.toLowerCase().includes(p))}),H=()=>{_.value=null,k.value=!0},W=p=>{_.value={...p},t.value=!0},Y=p=>{_.value=p,l.value=!0},q=async p=>{v.value=!0;try{_.value?.id?(await m.updateProduct(_.value.id,p),o("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­")):(await m.createProduct(p),o("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­")),k.value=!1,t.value=!1,await C()}catch(n){console.error(n),y("ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬")}finally{v.value=!1}},Z=async()=>{if(_.value?.id){try{await m.deleteProduct(_.value.id),o("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­")}catch(p){const n=p.data?.detail||"ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬";y(n)}l.value=!1,_.value=null,await C()}};return se(()=>{G.from(".product-row",{x:-20,opacity:0,stagger:.03,duration:.4})}),(p,n)=>{const z=we,A=Se,J=Be;return u(),c("div",Ee,[e("main",Fe,[e("header",{class:"page-header"},[n[7]||(n[7]=e("div",null,[e("h1",null,"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"),e("p",{class:"subtitle"},"Ø¥Ø¯Ø§Ø±Ø© ÙƒØªØ§Ù„ÙˆØ¬ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª")],-1)),e("button",{class:"btn btn-primary",onClick:H},"+ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬")]),e("div",Ie,[$(e("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>h.value=a),type:"text",placeholder:"Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...",class:"input-field search-input"},null,512),[[w,h.value]]),e("span",qe,r(I.value.length)+" Ù…Ù†ØªØ¬",1)]),e("div",ze,[e("table",Ae,[n[8]||(n[8]=e("thead",null,[e("tr",null,[e("th",null,"Ø§Ù„Ù…Ù†ØªØ¬"),e("th",null,"Ø§Ù„Ù…Ø§Ø±ÙƒØ©"),e("th",null,"Ø§Ù„ÙØ¦Ø©"),e("th",null,"Ø§Ù„Ø³Ø¹Ø±"),e("th",null,"Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"),e("th",null,"Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"),e("th",null,"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª")])],-1)),e("tbody",null,[(u(!0),c(T,null,B(I.value,a=>(u(),c("tr",{key:a.id,class:"product-row"},[e("td",null,[e("div",Le,[e("img",{src:a.image_url,alt:a.name,class:"product-thumb"},null,8,je),e("div",null,[e("span",Ne,r(a.name),1),e("span",Oe,"#"+r(a.id),1)])])]),e("td",null,r(a.brand?.name||"-"),1),e("td",null,r(a.category?.name||"-"),1),e("td",Qe,"$"+r(a.price.toLocaleString()),1),e("td",null,[e("span",{class:P(["stock-badge",{low:a.stock<30}])},r(a.stock),3)]),e("td",null,[e("span",Re,"â­ "+r(a.rating||"-"),1)]),e("td",null,[e("div",Ge,[e("button",{class:"action-btn edit",title:"Edit",onClick:K=>W(a)},"âœï¸",8,He),e("button",{class:"action-btn delete",title:"Delete",onClick:K=>Y(a)},"ðŸ—‘ï¸",8,We)])])]))),128))])])])]),V(A,{modelValue:k.value,"onUpdate:modelValue":n[2]||(n[2]=a=>k.value=a),title:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯",size:"lg"},{default:E(()=>[V(z,{categories:s(U)||[],brands:s(S)||[],onSubmit:q,onCancel:n[1]||(n[1]=a=>k.value=!1)},null,8,["categories","brands"])]),_:1},8,["modelValue"]),V(A,{modelValue:t.value,"onUpdate:modelValue":n[4]||(n[4]=a=>t.value=a),title:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬",size:"lg"},{default:E(()=>[V(z,{product:_.value,categories:s(U)||[],brands:s(S)||[],onSubmit:q,onCancel:n[3]||(n[3]=a=>t.value=!1)},null,8,["product","categories","brands"])]),_:1},8,["modelValue"]),V(J,{modelValue:l.value,"onUpdate:modelValue":n[5]||(n[5]=a=>l.value=a),title:"Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬",message:`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù '${_.value?.name}'ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.`,confirmText:"Ø­Ø°Ù",variant:"danger",onConfirm:Z,onCancel:n[6]||(n[6]=a=>l.value=!1)},null,8,["modelValue","message"])])}}}),Je=M(Ye,[["__scopeId","data-v-91cfbac3"]]);export{Je as default};
