import{d as V,u as k,y as S,V as C,s as q,r as l,o as N,g as f,c as p,a as c,e as s,m as w,f as B,A as b,n as m,v,t as y,w as T,h as R,_ as U,a0 as g,q as E,i as $}from"./Bd9HA-jC.js";const A={class:"page-container"},F={class:"card"},L={key:0},M={class:"form-group"},D=["disabled"],O={key:1,class:"step-2"},H={class:"form-group"},I={class:"form-group"},W=["disabled"],j=V({__name:"forgot-password",setup(z){k({title:"Forgot Password",meta:[{name:"robots",content:"noindex, nofollow"}]}),S();const n=C(),_=q(),i=l(1),d=l(""),r=l(""),u=l(""),t=l(!1),x=async()=>{t.value=!0;try{const o=g();await $fetch(`${o.public.apiBase}/auth/forgot-password`,{method:"POST",body:{email:d.value}}),n.success("Verification code sent if email exists"),i.value=2,f.from(".step-2",{x:20,opacity:0,duration:.4})}catch{n.error("Failed to process request")}finally{t.value=!1}},h=async()=>{t.value=!0;try{const o=g();await $fetch(`${o.public.apiBase}/auth/reset-password`,{method:"POST",body:{email:_.query.email,code:r.value,new_password:u.value}}),n.success("Password updated successfully"),E("/login")}catch(o){n.error(o.response?._data?.detail||"Failed to reset password")}finally{t.value=!1}};return N(()=>{f.from(".card",{y:30,opacity:0,duration:.6,ease:"power2.out"})}),(o,e)=>{const P=U;return c(),p("div",A,[e[10]||(e[10]=s("div",{class:"background"},[s("div",{class:"gradient-orb orb-1"})],-1)),s("div",F,[e[9]||(e[9]=s("h2",null,"Reset Password",-1)),i.value===1?(c(),p("div",L,[e[4]||(e[4]=s("p",{class:"subtitle"},"Enter your email to receive a recovery code.",-1)),s("form",{onSubmit:b(x,["prevent"])},[s("div",M,[e[3]||(e[3]=s("label",null,"Email Address",-1)),m(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),type:"email",required:"",class:"input",placeholder:"admin@example.com"},null,512),[[v,d.value]])]),s("button",{type:"submit",class:"btn btn-primary full-width",disabled:t.value},y(t.value?"Sending...":"Send Code"),9,D)],32)])):w("",!0),i.value===2?(c(),p("div",O,[e[7]||(e[7]=s("p",{class:"subtitle"},"Enter the code sent to your email and your new password.",-1)),s("form",{onSubmit:b(h,["prevent"])},[s("div",H,[e[5]||(e[5]=s("label",null,"Verification Code",-1)),m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),required:"",class:"input",placeholder:"123456"},null,512),[[v,r.value]])]),s("div",I,[e[6]||(e[6]=s("label",null,"New Password",-1)),m(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),type:"password",required:"",class:"input",placeholder:"New password"},null,512),[[v,u.value]])]),s("button",{type:"submit",class:"btn btn-primary full-width",disabled:t.value},y(t.value?"Updating...":"Update Password"),9,W)],32)])):w("",!0),B(P,{to:"/login",class:"back-link"},{default:T(()=>[...e[8]||(e[8]=[R("Back to Login",-1)])]),_:1})])])}}}),J=$(j,[["__scopeId","data-v-a5448902"]]);export{J as default};
